{"version":3,"sources":["../src/Ocelot.js"],"names":["Ocelot","el","events","endpoint","method","timeout","callback","callbackTimeout","push","console","warn","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","stauts","status","setTimeout","temp","document","createElement","innerHTML","responseText","querySelector","pageEvent","window","location","pathname"],"mappings":";;;;;;;;;;;;AAAA;;;;;;;;;QASSA,M,GAAAA,M;;IAEHA,M;AACF,sBAAgD;AAAA,YAApCC,EAAoC,uEAA/B,gBAA+B;AAAA,YAAbC,MAAa,uEAAJ,EAAI;;AAAA;;AAC5C,aAAKD,EAAL,GAAUA,EAAV;AACA,aAAKC,MAAL,GAAcA,MAAd;AACH;;;;qCAE4G;AAAA,gBAAlGC,QAAkG,uEAAvF,KAAuF;AAAA,gBAAhFC,MAAgF,uEAAvE,KAAuE;AAAA,gBAAhEC,OAAgE,uEAAtD,CAAsD;AAAA,gBAAnDC,QAAmD,uEAAxC,IAAwC;AAAA,gBAAlCC,eAAkC,uEAAhB,CAAgB;AAAA,gBAAbC,IAAa,uEAAN,IAAM;;AACzG,gBAAG,CAACL,QAAJ,EAAcM,QAAQC,IAAR,CAAa,sCAAb;AACd,gBAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,gBAAIE,IAAJ,CAAST,MAAT,EAAiBD,QAAjB,EAA2B,IAA3B;AACAQ,gBAAIG,IAAJ;AACAH,gBAAII,kBAAJ,GAAyB,YAAW;AAAA;;AAChC,oBAAGJ,IAAIK,UAAJ,KAAmB,CAAtB,EAAyB;AACzB,oBAAGL,IAAIM,MAAJ,KAAe,GAAlB,EAAuB;AACnBR,4BAAQC,IAAR,cAAwBN,MAAxB,SAAkCD,QAAlC,kBAAuDQ,IAAIO,MAA3D;AACH;;AAEDC,2BAAW,YAAM;AACb,wBAAIC,OAAOC,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACAF,yBAAKG,SAAL,GAAiBZ,IAAIa,YAArB;AACAH,6BAASI,aAAT,OAA2B,MAAKxB,EAAhC,EAAsCsB,SAAtC,GAAkDH,KAAKK,aAAL,OAAuB,MAAKxB,EAA5B,EAAkCsB,SAApF;;AAEA,wBAAIG,YAAY,MAAKxB,MAAL,CAAYyB,OAAOC,QAAP,CAAgBC,QAA5B,CAAhB;AACA,wBAAGH,SAAH,EAAc;AACV,4BAAG,OAAOA,SAAP,KAAqB,UAAxB,EAAoC;AAChCjB,oCAAQC,IAAR,cAAwBP,QAAxB,yDAAmFuB,SAAnF,yCAAmFA,SAAnF;AACA;AACH;AACD,8BAAKxB,MAAL,CAAYyB,OAAOC,QAAP,CAAgBC,QAA5B;AACH;AACJ,iBAbD,EAaGxB,OAbH;AAcH,aApBD;AAqBH","file":"Ocelot.js","sourcesContent":["/*\n *\n *  Ocelot.js\n *  Declan Tyson\n *  v0.0.1\n *  12/01/2017\n *\n */\n\nexport { Ocelot };\n\nclass Ocelot {\n    constructor(el = 'ocelot-content', events = {}) {\n        this.el = el;\n        this.events = events;\n    }\n\n    changePage(endpoint = false, method = 'GET', timeout = 0, callback = null, callbackTimeout = 0, push = true) {\n        if(!endpoint) console.warn('Ocelot: a PJAX endpoint is required.');\n        let xhr = new XMLHttpRequest();\n        xhr.open(method, endpoint, true);\n        xhr.send();\n        xhr.onreadystatechange = function() {\n            if(xhr.readyState !== 4) return;\n            if(xhr.stauts !== 200) {\n                console.warn(`Ocelot: ${method} ${endpoint} returned ${xhr.status}.`);\n            }\n\n            setTimeout(() => {\n                let temp = document.createElement('div');\n                temp.innerHTML = xhr.responseText;\n                document.querySelector(`#${this.el}`).innerHTML = temp.querySelector(`#${this.el}`).innerHTML;\n\n                let pageEvent = this.events[window.location.pathname];\n                if(pageEvent) {\n                    if(typeof pageEvent !== 'function') {\n                        console.warn(`Ocelot: ${endpoint} event must be a function, instead found ${typeof pageEvent}.`);\n                        return;\n                    }\n                    this.events[window.location.pathname]();\n                }\n            }, timeout);\n        }\n    }\n}"]}