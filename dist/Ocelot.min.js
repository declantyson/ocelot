/* 
  * 
  *  Ocelot 
  *  Declan Tyson 
  *  v0.3.2 
  *  16/01/2017 
  * 
  */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Ocelot=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ocelot-content";d(this,a),this.el=b,this.events={},this.defaultOpts={endpoint:!1,method:"GET",timeout:0,callback:null,callbackTimeout:0,push:!0};var c=this;history.pushState?window.onpopstate=function(){c.changePage({endpoint:window.location.pathname,push:!1})}:console.warn("Ocelot: this browser does not support history.pushState. Hash changing is coming soon.")}return f(a,[{key:"setEvent",value:function(a,b){this.events[a]=b}},{key:"changePage",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=this.defaultOpts;Object.keys(b).forEach(function(a){c[a]=b[a]}),c.endpoint||console.warn("Ocelot: a PJAX endpoint is required.");var d=new XMLHttpRequest;d.open(c.method,c.endpoint,!0),d.send(),d.onreadystatechange=function(){if(4===d.readyState){if(200!==d.status)return void console.warn("Ocelot: "+c.method+" "+c.endpoint+" returned "+d.status+".");setTimeout(function(){var b=document.createElement("div");b.innerHTML=d.responseText,document.querySelector("#"+a.el).innerHTML=b.querySelector("#"+a.el).innerHTML;var f=a.events[c.endpoint];if(f){if("function"!=typeof f)return void console.warn("Ocelot: "+c.endpoint+" event must be a function, instead found "+("undefined"==typeof f?"undefined":e(f))+".");f()}},c.timeout),setTimeout(function(){if(null!==c.callback)return"function"!=typeof c.callback?void console.warn("Ocelot: Callback must be a function, instead found "+e(c.callback)+"."):void c.callback(d.responseText)},c.callbackTimeout),c.push&&history.pushState("","New URL: "+c.endpoint,c.endpoint)}}}},{key:"all",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.addEventListener("click",function(c){c=c||window.event;for(var d=c.target||c.srcElement;d;){if(d instanceof HTMLAnchorElement){c.preventDefault(),b.endpoint=d.attributes.href.value,a.changePage(b);break}d=d.parentNode}})}},{key:"fadeAll",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b.timeout||(b.timeout=250),b.callbackTimeout||(b.callbackTimeout=250),b.fadeTo||(b.fadeTo=0),document.getElementById(this.el).style.transition="opacity "+b.timeout/1e3+"s ease-out",document.addEventListener("click",function(c){c=c||window.event;for(var d=c.target||c.srcElement;d;){if(d instanceof HTMLAnchorElement){var e=function(){c.preventDefault(),document.getElementById(a.el).style.opacity=b.fadeTo;var e=b.callback;return b.callback=function(b){document.getElementById(a.el).style.opacity=1,e(b)},b.endpoint=d.attributes.href.value,a.changePage(b),"break"}();if("break"===e)break}d=d.parentNode}})}}]),a}();c.Pjax=g},{}]},{},[1])(1)});